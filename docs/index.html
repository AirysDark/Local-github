<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Local-github Config (Safe, Embedded Lists)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root { --bg:#0b0f14; --card:#121821; --muted:#a6b3c2; --text:#e8eef6; --accent:#5cc8ff; }
  body { margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text); }
  .wrap { max-width:1100px; margin:24px auto; padding:0 16px; }
  .row { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
  .card { background:var(--card); border:1px solid #1f2733; border-radius:12px; padding:16px; }
  label { font-size:12px; color:var(--muted); display:block; margin-top:8px; }
  input, select, textarea, button { width:100%; box-sizing:border-box; padding:10px; border-radius:8px; border:1px solid #2a3342; background:#0e141c; color:#e8eef6; }
  small { color:var(--muted); }
  button { margin-top:12px; background:var(--accent); color:#001019; border:none; font-weight:600; cursor:pointer; }
  .out { white-space:pre-wrap; background:#0e141c; padding:12px; border-radius:8px; border:1px solid #2a3342; min-height:80px; }
  .two { display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
</style>
</head>
<body>
<div class="wrap">

  <div class="row">
    <div class="card">
      <label>Owner</label>
      <input id="owner" placeholder="e.g. AirysDark">
      <label>Repo</label>
      <input id="repo" placeholder="e.g. Local-github">
      <label>Workflow file path</label>
      <input id="workflow" value=".github/workflows/build.yml">
      <label>Ref/branch</label>
      <input id="ref" value="main">
      <small>This page never sends the request. It only prints the JSON + a curl command you can run locally.</small>
    </div>

    <div class="card">
      <div class="two">
        <div>
          <label>Build type</label>
          <select id="build_type">
            <option value="pi" selected>pi</option>
            <option value="pc">pc (reserved)</option>
          </select>
        </div>
        <div>
          <label>CPU bitrate</label>
          <select id="cpu_bitrate">
            <option value="64bit" selected>64bit</option>
            <option value="32bit">32bit</option>
          </select>
        </div>
      </div>
      <label>target_bits</label>
      <input id="target_bits" value="auto" readonly>
      <small>Computed from Build type + CPU bitrate; shows "auto" here.</small>
    </div>
  </div>

  <div class="row" style="margin-top:16px">
    <div class="card">
      <label>Console username</label>
      <input id="user_name" placeholder="e.g. AirysDark">
      <label>Console password</label>
      <input id="user_password" type="password" placeholder="e.g. Zombie1986X2">

      <label style="margin-top:14px;">Wi‑Fi SSID</label>
      <input id="wifi_ssid" placeholder="e.g. Raspbain">
      <label>Wi‑Fi password</label>
      <input id="wifi_password" type="password" placeholder="e.g. YourWiFiPassword">
    </div>

    <div class="card">
      <label>PermitRootLogin</label>
      <input id="ssh_prl" placeholder="e.g. yes">
      <small><code>yes</code>=allow root; <code>prohibit-password</code>=keys only; <code>no</code>=disable</small>
      <label>PasswordAuthentication</label>
      <input id="ssh_pa" placeholder="e.g. yes">
      <label>PubkeyAuthentication</label>
      <input id="ssh_pk" placeholder="e.g. yes">
    </div>
  </div>

  <div class="row" style="margin-top:16px">
    <div class="card">
      <div class="two">
        <div>
          <label>Static IPv4</label>
          <input id="static_ip" placeholder="e.g. 192.168.0.8">
        </div>
        <div>
          <label>Gateway IPv4</label>
          <input id="gateway" placeholder="e.g. 192.168.0.1">
        </div>
      </div>
      <label>DNS servers</label>
      <input id="dns" placeholder="e.g. 1.1.1.1;8.8.8.8">
    </div>

    <div class="card">
      <label>Wi‑Fi country</label>
      <select id="wifi_country"></select>
      <label>Timezone</label>
      <select id="timezone"></select>
      <label>Keyboard layout</label>
      <select id="keyboard" onchange="toggleKeyboardCustom()"></select>
      <label>Custom layout (only if &quot;custom&quot;)</label>
      <input id="keyboard_custom" placeholder="e.g. us,intl" style="display:none">
    </div>
  </div>

  <div class="card" style="margin-top:16px">
    <button id="buildBtn">Show build payload</button>
    <div style="margin-top:8px;">
      <label>Personal Access Token (optional — inserted into the curl below only)</label>
      <input id="token" type="password" placeholder="ghp_xxx (NOT sent by this page)">
    </div>

    <h3 style="margin-top:16px">workflow_dispatch JSON</h3>
    <div id="jsonOut" class="out">Click “Show build payload”.</div>

    <h3 style="margin-top:16px">curl command (copy & run locally)</h3>
    <div id="curlOut" class="out">—</div>

    <h3 style="margin-top:16px">Repo details used</h3>
    <div id="repoOut" class="out">—</div>
  </div>

</div>

<script>
const COUNTRIES = ["AD", "AE", "AF", "AG", "AI", "AL", "AM", "AO", "AQ", "AR", "AS", "AT", "AU", "AW", "AX", "AZ", "BA", "BB", "BD", "BE", "BF", "BG", "BH", "BI", "BJ", "BL", "BM", "BN", "BO", "BQ", "BR", "BS", "BT", "BV", "BW", "BY", "BZ", "CA", "CC", "CD", "CF", "CG", "CH", "CI", "CK", "CL", "CM", "CN", "CO", "CR", "CU", "CV", "CW", "CX", "CY", "CZ", "DE", "DJ", "DK", "DM", "DO", "DZ", "EC", "EE", "EG", "EH", "ER", "ES", "ET", "FI", "FJ", "FK", "FM", "FO", "FR", "GA", "GB", "GD", "GE", "GF", "GG", "GH", "GI", "GL", "GM", "GN", "GP", "GQ", "GR", "GS", "GT", "GU", "GW", "GY", "HK", "HM", "HN", "HR", "HT", "HU", "ID", "IE", "IL", "IM", "IN", "IO", "IQ", "IR", "IS", "IT", "JE", "JM", "JO", "JP", "KE", "KG", "KH", "KI", "KM", "KN", "KP", "KR", "KW", "KY", "KZ", "LA", "LB", "LC", "LI", "LK", "LR", "LS", "LT", "LU", "LV", "LY", "MA", "MC", "MD", "ME", "MF", "MG", "MH", "MK", "ML", "MM", "MN", "MO", "MP", "MQ", "MR", "MS", "MT", "MU", "MV", "MW", "MX", "MY", "MZ", "NA", "NC", "NE", "NF", "NG", "NI", "NL", "NO", "NP", "NR", "NU", "NZ", "OM", "PA", "PE", "PF", "PG", "PH", "PK", "PL", "PM", "PN", "PR", "PS", "PT", "PW", "PY", "QA", "RE", "RO", "RS", "RU", "RW", "SA", "SB", "SC", "SD", "SE", "SG", "SH", "SI", "SJ", "SK", "SL", "SM", "SN", "SO", "SR", "SS", "ST", "SV", "SX", "SY", "SZ", "TC", "TD", "TF", "TG", "TH", "TJ", "TK", "TL", "TM", "TN", "TO", "TR", "TT", "TV", "TW", "TZ", "UA", "UG", "UM", "US", "UY", "UZ", "VA", "VC", "VE", "VG", "VI", "VN", "VU", "WF", "WS", "YE", "YT", "ZA", "ZM", "ZW"];
const TIMEZONES = ["UTC", "Pacific/Midway", "Pacific/Honolulu", "Pacific/Tahiti", "Pacific/Marquesas", "Pacific/Gambier", "America/Adak", "America/Anchorage", "America/Juneau", "America/Sitka", "America/Yakutat", "America/Los_Angeles", "America/Phoenix", "America/Denver", "America/Chicago", "America/New_York", "America/Indiana/Indianapolis", "America/Detroit", "America/Toronto", "America/Vancouver", "America/Mexico_City", "America/Monterrey", "America/Guatemala", "America/Costa_Rica", "America/Panama", "America/Bogota", "America/Lima", "America/Caracas", "America/Halifax", "America/St_Johns", "America/Sao_Paulo", "America/Argentina/Buenos_Aires", "America/Santiago", "America/La_Paz", "America/Montevideo", "America/Asuncion", "America/Guyana", "America/Paramaribo", "Atlantic/Azores", "Atlantic/Cape_Verde", "Atlantic/Reykjavik", "Atlantic/Bermuda", "Atlantic/Canary", "Europe/London", "Europe/Dublin", "Europe/Lisbon", "Europe/Madrid", "Europe/Paris", "Europe/Brussels", "Europe/Amsterdam", "Europe/Berlin", "Europe/Stockholm", "Europe/Rome", "Europe/Vienna", "Europe/Prague", "Europe/Warsaw", "Europe/Budapest", "Europe/Copenhagen", "Europe/Zurich", "Europe/Monaco", "Europe/Luxembourg", "Europe/Oslo", "Europe/Helsinki", "Europe/Athens", "Europe/Sofia", "Europe/Bucharest", "Europe/Belgrade", "Europe/Kiev", "Europe/Kyiv", "Europe/Chisinau", "Europe/Riga", "Europe/Vilnius", "Europe/Tallinn", "Europe/Istanbul", "Europe/Moscow", "Europe/Samara", "Europe/Kaliningrad", "Africa/Casablanca", "Africa/Algiers", "Africa/Tunis", "Africa/Cairo", "Africa/Tripoli", "Africa/Lagos", "Africa/Nairobi", "Africa/Johannesburg", "Africa/Harare", "Africa/Maputo", "Africa/Addis_Ababa", "Africa/Kampala", "Africa/Accra", "Africa/Abidjan", "Asia/Jerusalem", "Asia/Amman", "Asia/Beirut", "Asia/Baghdad", "Asia/Tehran", "Asia/Dubai", "Asia/Muscat", "Asia/Kabul", "Asia/Karachi", "Asia/Kolkata", "Asia/Kathmandu", "Asia/Dhaka", "Asia/Yangon", "Asia/Bangkok", "Asia/Singapore", "Asia/Kuala_Lumpur", "Asia/Manila", "Asia/Hong_Kong", "Asia/Taipei", "Asia/Shanghai", "Asia/Macau", "Asia/Ulaanbaatar", "Asia/Tokyo", "Asia/Seoul", "Australia/Perth", "Australia/Eucla", "Australia/Darwin", "Australia/Adelaide", "Australia/Brisbane", "Australia/Sydney", "Australia/Melbourne", "Australia/Hobart", "Australia/Lord_Howe", "Pacific/Port_Moresby", "Pacific/Guadalcanal", "Pacific/Noumea", "Pacific/Auckland", "Pacific/Chatham", "Pacific/Fiji", "Pacific/Tongatapu", "Pacific/Apia", "Indian/Maldives", "Indian/Mauritius", "Indian/Reunion", "Indian/Mahe", "Indian/Chagos", "Indian/Christmas", "Indian/Cocos"];
const KEYBOARDS = ["us", "us(intl)", "us(altgr-intl)", "us(colemak)", "us(colemak-dh)", "us(dvorak)", "us(workman)", "us(mac)", "au", "gb", "ie", "ca", "ca(fr)", "latam", "br", "es", "pt", "pt(mac)", "fr", "fr(azerty)", "ch", "be", "it", "de", "de(nodeadkeys)", "pl", "cz", "sk", "hu", "ro", "bg", "ru", "ru(phonetic)", "ua", "srp", "hr", "si", "ba", "mk", "al", "el", "tr", "tr(f)", "ku", "se", "no", "dk", "fi", "is", "nl", "lu", "li", "ee", "lv", "lt", "lt(ibm)", "gr", "mt", "md", "il", "ara", "ir", "pk", "in", "bd", "lk", "np", "th", "lo", "km", "vi", "my", "cn", "tw", "hk", "jp", "kr", "za", "ng", "gh", "tz", "ke", "ma", "tn", "dz", "eg", "custom"];

function fillSelect(id, arr, placeholder){
  const el = document.getElementById(id);
  el.innerHTML = "";
  const o0 = document.createElement('option');
  o0.value = ""; o0.textContent = placeholder;
  el.appendChild(o0);
  arr.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; el.appendChild(o); });
}

function toggleKeyboardCustom(){
  const kb = document.getElementById('keyboard').value;
  document.getElementById('keyboard_custom').style.display = (kb === 'custom') ? 'block' : 'none';
}

function targetBitsComputed() {
  return document.getElementById('build_type').value + ' ' + document.getElementById('cpu_bitrate').value;
}

function gatherInputs() {
  return {
    target_bits: targetBitsComputed(),
    user_name: document.getElementById('user_name').value,
    user_password: document.getElementById('user_password').value,
    wifi_ssid: document.getElementById('wifi_ssid').value,
    wifi_password: document.getElementById('wifi_password').value,
    ssh_permit_root_login: document.getElementById('ssh_prl').value,
    ssh_password_auth: document.getElementById('ssh_pa').value,
    ssh_pubkey_auth: document.getElementById('ssh_pk').value,
    static_ip: document.getElementById('static_ip').value,
    gateway: document.getElementById('gateway').value,
    dns: document.getElementById('dns').value,
    wifi_country: document.getElementById('wifi_country').value,
    timezone: document.getElementById('timezone').value,
    keyboard: document.getElementById('keyboard').value,
    keyboard_custom: document.getElementById('keyboard_custom').value
  };
}

function showPayload() {
  const owner = (document.getElementById('owner').value || '').trim();
  const repo  = (document.getElementById('repo').value  || '').trim();
  const wf    = (document.getElementById('workflow').value || '.github/workflows/build.yml').trim();
  const ref   = (document.getElementById('ref').value || 'main').trim();
  const token = (document.getElementById('token').value || '').trim();

  if (!owner || !repo) {
    document.getElementById('jsonOut').textContent = 'Owner and repo are required.';
    document.getElementById('curlOut').textContent = '—';
    document.getElementById('repoOut').textContent = '—';
    return;
  }

  const body = { ref, inputs: gatherInputs() };
  const url = `https://api.github.com/repos/${owner}/${repo}/actions/workflows/${encodeURIComponent(wf)}/dispatches`;

  document.getElementById('jsonOut').textContent = JSON.stringify(body, null, 2);
  document.getElementById('repoOut').textContent = JSON.stringify({ url, owner, repo, workflow: wf, ref }, null, 2);

  const authHeader = token ? `  -H "Authorization: Bearer ${token}" \\` : '  # -H "Authorization: Bearer <TOKEN>" \\' ;
  const curl = [
    'curl -s -X POST \\',
    '  -H "Accept: application/vnd.github+json" \\',
    '  -H "X-GitHub-Api-Version: 2022-11-28" \\',
    authHeader,
    `  https://api.github.com/repos/${owner}/${repo}/actions/workflows/${encodeURIComponent(wf)}/dispatches \\`,
    "  -d '" + JSON.stringify(body).replace(/'/g, "'"'"'") + "'"
  ].join("\n");
  document.getElementById('curlOut').textContent = curl;
}

document.getElementById('buildBtn').addEventListener('click', function(e){
  e.preventDefault();
  document.getElementById('target_bits').value = 'auto'; // keep visible as "auto"
  showPayload();
});

fillSelect('wifi_country', COUNTRIES, '(Wi‑Fi country)');
fillSelect('timezone', TIMEZONES, '(Timezone)');
fillSelect('keyboard', KEYBOARDS, '(Keyboard)');
</script>
</body>
</html>
